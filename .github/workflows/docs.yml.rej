diff a/.github/workflows/docs.yml b/.github/workflows/docs.yml	(rejected hunks)
@@ -45,6 +45,9 @@ jobs:
   docs:
     name: Build documentation
     runs-on: 'ubuntu-22.04'
+    defaults:
+      run:
+        shell: bash -l {0}  # required for conda env
     steps:
       - run: sudo apt install --yes graphviz pandoc
       - uses: actions/checkout@v3
@@ -51,15 +54,28 @@ jobs:
         with:
           ref: ${{ inputs.branch == '' && github.ref_name || inputs.branch }}
           fetch-depth: 0  # history required so cmake can determine version
-      - uses: actions/setup-python@v4
-        with:
-          python-version-file: '.github/workflows/python-version-ci'
-      - run: python -m pip install --upgrade pip
-      - run: python -m pip install -r requirements/ci.txt
-      - run: tox -e releasedocs -- ${VERSION}
+      - uses: mamba-org/setup-micromamba@v1
         if: ${{ inputs.version != '' }}
-      - run: tox -e docs
+        with:
+          environment-file: .buildconfig/ci-linux.yml
+          cache-environment: true
+          create-args: >-
+            python=3.10
+            scippneutron==${{ inputs.version }}
+      - uses: mamba-org/setup-micromamba@v1
+        if: ${{ inputs.version == '' }}
+        with:
+          environment-file: .buildconfig/ci-linux.yml
+          cache-environment: true
+          create-args: >-
+            python=3.10
+            conda-build
+      - run: conda develop src
         if: ${{ inputs.version == '' }}
+      - run: |
+          python -m sphinx -j2 -v -b html -d doctrees docs html
+          python -m sphinx -j2 -v -b doctest -d doctrees docs html
+          find html -type f -name "*.ipynb" -not -path "html/_sources/*" -delete
       - run: tox -e linkcheck
         if: ${{ inputs.linkcheck }}
       - uses: actions/upload-artifact@v3
